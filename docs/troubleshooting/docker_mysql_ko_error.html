<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MySQL ì¸ì½”ë”© ë¬¸ì œ: Latin1ê³¼ì˜ ì „ìŸ ê¸°ë¡</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f1f5f9;
        }
        .timeline-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .timeline-item.active {
            background-color: #007bff; /* íŒŒë€ìƒ‰ ê³„ì—´ë¡œ ë³€ê²½ */
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .timeline-item.active .timeline-phase {
            color: white;
        }
        .timeline-item:not(.active):hover {
            background-color: #e6f3ff; /* ì—°í•œ íŒŒë€ìƒ‰ ê³„ì—´ë¡œ ë³€ê²½ */
            transform: translateY(-2px);
        }
        .content-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            font-family: 'Courier New', Courier, monospace;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-size: 0.875rem;
        }
        .text-error { color: #dc3545; }
        .text-warning { color: #ffc107; }
    </style>
</head>
<body class="text-slate-800">

    <main class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">ì‚¬ê±´ íŒŒì¼: MySQL Latin1 ì¸ì½”ë”© ë¯¸ìŠ¤í„°ë¦¬</h1>
            <p class="mt-2 text-lg text-slate-600">Spring + React í™˜ê²½ì—ì„œ Docker MySQL ì¸ì½”ë”© ë¬¸ì œë¥¼ í•´ê²°í•œ ê¸°ë¡.</p>
        </header>

        <nav id="timeline-nav" class="flex flex-col md:flex-row justify-center items-center gap-2 md:gap-4 mb-12">
            </nav>

        <div id="content-area">
            </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const timelineNav = document.getElementById('timeline-nav');
            const contentArea = document.getElementById('content-area');
            let currentPhaseIndex = 0;

            const caseFiles = [
                {
                    phase: "1ë‹¨ê³„",
                    title: "ê¸°ë¬˜í•œ ê¹¨ì§ í˜„ìƒ",
                    icon: "â“",
                    content: {
                        symptom: "React ìš”ì²­(A) ë°ì´í„°ëŠ” DBì— <span class='text-error'>???</span>ë¡œ ì €ì¥ë˜ì–´ë„ Java ì¡°íšŒ ì‹œ <span class='text-success'>ì •ìƒ ì¶œë ¥</span>ë˜ë‚˜, SQL íŒŒì¼ ì£¼ì…(B) ë°ì´í„°ëŠ” DBì— ì •ìƒ ì €ì¥ë˜ì–´ë„ Java ì¡°íšŒ ì‹œ <span class='text-error'>ê¹¨ì§„ ë¬¸ì</span>ë¡œ ì¶œë ¥ë¨.",
                        hypothesis: "Java/JDBC ë ˆì´ì–´ì˜ ì¸ì½”ë”© ì„¤ì • ì˜¤ë¥˜. íŠ¹íˆ JDBC URLì— ì¸ì½”ë”© ì˜µì…˜ ëˆ„ë½ ì˜ì‹¬.",
                        investigation: [
                            "JDBC URLì— `characterEncoding=UTF-8`, `serverTimezone=Asia/Seoul` ë“± ì˜µì…˜ ì¶”ê°€.",
                            "`DataSourceConfig` Beanì„ Java ì½”ë“œë¡œ ì •ì˜í•˜ì—¬ ì¸ì½”ë”© ì†ì„±ì„ ê°•ì œ ì£¼ì… ì‹œë„.",
                            "`EncodingDiagnosticRunner`ë¥¼ í†µí•´ JVM ê¸°ë³¸ ì¸ì½”ë”©(UTF-8) ì •ìƒ í™•ì¸.",
                            "ê²°ê³¼ì ìœ¼ë¡œ Java/JDBC ë‹¨ì˜ ì–´ë–¤ ì„¤ì •ë„ B ë°©ì‹ì˜ ê¹¨ì§ í˜„ìƒì„ í•´ê²°í•˜ì§€ ëª»í–ˆìœ¼ë©°, A ë°©ì‹ì€ ì¼ì¢…ì˜ ì˜¤ë¥˜ ìƒì‡„ í˜„ìƒìœ¼ë¡œ ì¶”ì •ë¨."
                        ],
                        breakthrough: "ë¬¸ì œì˜ ê·¼ì›ì´ Javaê°€ ì•„ë‹Œ, **DB ì„œë²„ì™€ í´ë¼ì´ì–¸íŠ¸ ê°„ì˜ í†µì‹  ì´ˆê¸° ì„¤ì •**ì— ìˆìŒì„ í™•ì‹ í•˜ê³  Docker í™˜ê²½ ë””ë²„ê¹…ìœ¼ë¡œ ì „í™˜."
                    }
                },
                {
                    phase: "2ë‹¨ê³„",
                    title: "Latin1ê³¼ì˜ ì¶©ëŒ",
                    icon: "âš”ï¸",
                    content: {
                        symptom: "DBì˜ í…Œì´ë¸”/ë°ì´í„°ë² ì´ìŠ¤ ì¸ì½”ë”©ì€ `utf8mb4`ë¡œ ì •ìƒì´ë‚˜, ì—°ê²°(Connection) ì‹œ ì¸ì½”ë”©ì€ ê³„ì†í•´ì„œ `latin1`ìœ¼ë¡œ ì„¤ì •ë¨.",
                        hypothesis: "Docker í™˜ê²½ ë³€ìˆ˜ ë˜ëŠ” ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ê°€ ì¸ì½”ë”© ê¸°ë³¸ê°’ì„ ë®ì–´ì“°ì§€ ëª»í•˜ê³  ìˆìŒ.",
                        investigation: [
                            "Shellì—ì„œ `SHOW VARIABLES LIKE 'character_set_%';` ì‹¤í–‰ ê²°ê³¼, `character_set_client`ì™€ `character_set_connection`ì´ **<span class='text-error'>latin1</span>**ì¸ ê²ƒì„ í™•ì¸.",
                            "Docker Composeì— `MYSQL_CHARSET=utf8mb4`, `MYSQL_COLLATION` ë“± **í™˜ê²½ ë³€ìˆ˜** ì¶”ê°€ ì‹œë„í–ˆìœ¼ë‚˜ ì‹¤íŒ¨.",
                            "ë³¼ë¥¨ ë§ˆìš´íŠ¸ë¥¼ í†µí•œ **ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸** (`/docker-entrypoint-initdb.d`)ë¥¼ ì‚¬ìš©í•˜ì—¬ ì¸ì½”ë”© ì„¤ì • ê°•ì œ ì‹œë„í–ˆìœ¼ë‚˜ ì‹¤íŒ¨.",
                            "`command`ì— `--character-set-client-handshake=FALSE`ì™€ `--init-connect='SET NAMES utf8mb4'`ë¥¼ ì§ì ‘ ì‚½ì…í•˜ì—¬ **ì˜¤ë¥˜ë§Œ ìœ ë°œ**í•˜ê³  ì‚­ì œí•¨."
                        ],
                        breakthrough: "í™˜ê²½ ë³€ìˆ˜ë‚˜ ì´ˆê¸°í™” ìŠ¤í¬ë¦½íŠ¸ë§Œìœ¼ë¡œëŠ” MySQL í´ë¼ì´ì–¸íŠ¸ ì—°ê²° ì‹œì˜ <span class='text-error'>latin1</span> ê¸°ë³¸ê°’ì„ ê°•ì œí•  ìˆ˜ ì—†ìœ¼ë©°, **Configuration íŒŒì¼**ì„ í†µí•œ ê°•ë ¥í•œ ì˜¤ë²„ë¼ì´ë“œê°€ í•„ìš”í•¨ì„ ì¸ì§€."
                    }
                },
                {
                    phase: "3ë‹¨ê³„",
                    title: "ë³´ì•ˆ ê²½ê³ ì˜ ì¥ë²½",
                    icon: "ğŸ”’",
                    content: {
                        symptom: "`my.cnf` íŒŒì¼ì„ ë§ˆìš´íŠ¸í•´ë„ ì„¤ì •ì´ ì ìš©ë˜ì§€ ì•Šê³ , ë¡œê·¸ì— <span class='text-warning'>World-writable config file '/etc/mysql/conf.d/my.cnf' is ignored.</span> ê²½ê³ ê°€ ì§€ì†ì ìœ¼ë¡œ ì¶œë ¥.",
                        hypothesis: "MySQL ì„œë²„ê°€ ë³´ì•ˆìƒì˜ ì´ìœ ë¡œ í˜¸ìŠ¤íŠ¸ì—ì„œ ë§ˆìš´íŠ¸ëœ ì„¤ì • íŒŒì¼ì˜ ê´‘ë²”ìœ„í•œ ê¶Œí•œì„ ê±°ë¶€í•˜ê³  ìˆìŒ.",
                        investigation: [
                            "MySQL ë³´ì•ˆ ê°€ì´ë“œë¼ì¸ì— ë”°ë¼ ì„¤ì • íŒŒì¼ì€ ì „ì—­ ì“°ê¸° ê¶Œí•œ(World-writable)ì´ ìˆì–´ì„œëŠ” ì•ˆ ë¨ì„ íŒŒì•….",
                            "Windows í™˜ê²½ì—ì„œëŠ” í˜¸ìŠ¤íŠ¸ì—ì„œ `chmod`ê°€ ë¶ˆê°€í•˜ë¯€ë¡œ, **Docker Entrypoint ë‹¨ê³„ì—ì„œ ê¶Œí•œì„ ë³€ê²½**í•´ì•¼ í•¨ì„ ê²°ì •.",
				"MYSQL ê³„ì •ì„ rootê°€ ì•„ë‹Œ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ, ë¡œê·¸ì¸ ê³„ì • ì„¤ì • í•´ì•¼í•¨ íŒŒì•…"
                        ],
                        breakthrough: "`docker-compose.yml`ì˜ `command`ì— <span class='text-success'>chmod 644</span> ëª…ë ¹ì„ ì¶”ê°€í•˜ì—¬ ê¶Œí•œ ë¬¸ì œë¥¼ í•´ê²°. ì´ë¡œì¨ `my.cnf` ì„¤ì •ê³¼ ì‚¬ìš©ì ê³„ì •ìœ¼ë¡œ ì„¤ì • í›„ ë¹„ë¡œì†Œ ì ìš©ë  ìˆ˜ ìˆëŠ” ê¸¸ì´ ì—´ë¦¼."
                    }
                },
                {
                    phase: "4ë‹¨ê³„",
                    title: "ê·¼ë³¸ì ì¸ í•´ê²°",
                    icon: "âœ…",
                    content: {
                        symptom: "ëª¨ë“  í†µì‹  ê²½ë¡œì—ì„œ í•œê¸€ ê¹¨ì§ í˜„ìƒì´ ì™„ì „íˆ ì‚¬ë¼ì§.",
                        hypothesis: "DB ì„œë²„ì˜ í´ë¼ì´ì–¸íŠ¸/ì»¤ë„¥ì…˜ ì¸ì½”ë”©ì„ ê°•ì œë¡œ í†µì¼í•˜ê³ , ë°ì´í„° íŒŒì¼ ìì²´ë¥¼ ê¹¨ì§€ì§€ ì•Šì€ ìƒíƒœë¡œ ì£¼ì….",
                        investigation: [
                            "ê¶Œí•œ ë¬¸ì œê°€ í•´ê²°ëœ í›„, `my.cnf`ì— <span class='text-success'>init_connect = SET NAMES utf8mb4</span>ë¥¼ ì¶”ê°€í•˜ì—¬ ëª¨ë“  ë¹„ ìŠˆí¼ìœ ì € ì—°ê²° ì‹œ ì¸ì½”ë”©ì„ ê°•ì œ í†µì¼.",
                            "ê¹¨ì§„ ë°±ì—… íŒŒì¼ ëŒ€ì‹ , **UTF-8 (BOM ì—†ìŒ)**ìœ¼ë¡œ ì €ì¥ëœ ìƒˆë¡œìš´ SQL ìŠ¤í¬ë¦½íŠ¸ë¥¼ ì£¼ì…í•˜ì—¬ ë°ì´í„° ë³µêµ¬ ì™„ë£Œ.",
                        ],
                        breakthrough: "<strong>ë¬¸ì œì˜ ê·¼ë³¸ì´ Java/JDBCê°€ ì•„ë‹Œ, Docker MySQL ì»¨í…Œì´ë„ˆì˜ ì˜ëª»ëœ ê¸°ë³¸ ì„¤ì •(latin1)ì„ì„ ìµœì¢… í™•ì¸.</strong> ë¶ˆí•„ìš”í–ˆë˜ Java/JDBCì˜ ëª¨ë“  ì¸ì½”ë”© ì„¤ì •ì„ ì œê±°í–ˆìŒì—ë„ ë¶ˆêµ¬í•˜ê³  ì‹œìŠ¤í…œì´ ì™„ë²½í•˜ê²Œ ë™ì‘í•˜ëŠ” ê²ƒì„ í™•ì¸í•¨."
                    }
                }
            ];

            function render() {
                // íƒ€ì„ë¼ì¸ ë Œë”ë§
                timelineNav.innerHTML = '';
                caseFiles.forEach((file, index) => {
                    const item = document.createElement('div');
                    item.className = `timeline-item flex-1 p-3 md:p-4 rounded-lg shadow-md bg-white border border-slate-200 text-center ${index === currentPhaseIndex ? 'active' : ''}`;
                    item.dataset.index = index;
                    item.innerHTML = `
                        <div class="text-3xl mb-1">${file.icon}</div>
                        <div class="font-bold text-sm md:text-base">${file.title}</div>
                        <div class="timeline-phase text-xs text-slate-500">${file.phase}</div>
                    `;
                    timelineNav.appendChild(item);
                });

                // ì½˜í…ì¸  ë Œë”ë§
                const file = caseFiles[currentPhaseIndex];
                contentArea.innerHTML = '';
                const contentDiv = document.createElement('div');
                contentDiv.className = 'content-fade-in bg-white p-6 md:p-8 rounded-lg shadow-lg border border-slate-200';
                
                let investigationItems = file.content.investigation
                    .map(item => `<li class="flex items-start"><span class="mr-2 text-blue-500">-</span><span>${item}</span></li>`)
                    .join('');

                contentDiv.innerHTML = `
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">${file.icon} ${file.title}</h2>
                    <div class="space-y-6">
                        <div>
                            <h3 class="font-semibold text-lg text-red-600 mb-2">ì¦ìƒ</h3>
                            <p class="text-slate-700">${file.content.symptom}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-yellow-600 mb-2">ì´ˆê¸° ê°€ì„¤ / ì‹œë„</h3>
                            <p class="text-slate-700">${file.content.hypothesis}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-blue-600 mb-2">ìˆ˜ì‚¬ ë° ë‹¨ì„œ (ì‹œí–‰ì°©ì˜¤ í¬í•¨)</h3>
                            <ul class="space-y-2 text-slate-700">${investigationItems}</ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-green-600 mb-2">ê²°ì •ì  ëŒíŒŒêµ¬ / ê²°ë¡ </h3>
                            <p class="text-slate-700 font-medium">${file.content.breakthrough}</p>
                        </div>
                    </div>
                `;
                contentArea.appendChild(contentDiv);
            }
            
            timelineNav.addEventListener('click', (e) => {
                const target = e.target.closest('.timeline-item');
                if (target && target.dataset.index) {
                    currentPhaseIndex = parseInt(target.dataset.index, 10);
                    render();
                }
            });

            // ì´ˆê¸° ë Œë”ë§
            render();
        });
    </script>

</body>
</html>