<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Google ê³„ì • ì—°ë™: íŠ¸ëŸ¬ë¸”ìŠˆíŒ… í•´ê²°ê¸°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@300;400;500;700&display=swap" rel="stylesheet">
    <!-- Chosen Palette: Cool Slate -->
    <!-- Application Structure Plan: ì¸í„°ë™í‹°ë¸Œ íƒ€ì„ë¼ì¸/ì‚¬ê±´ íŒŒì¼ í˜•íƒœì˜ SPAë¥¼ ì„¤ê³„í–ˆìŠµë‹ˆë‹¤. ì‚¬ìš©ìëŠ” ë””ë²„ê¹… ë‹¨ê³„ë¥¼ ì‹œê°„ìˆœìœ¼ë¡œ í´ë¦­í•˜ë©° ë”°ë¼ê°ˆ ìˆ˜ ìˆìŠµë‹ˆë‹¤. ì´ êµ¬ì¡°ëŠ” ì •ì ì¸ ë¦¬í¬íŠ¸ë¥¼ ë¬¸ì œ í•´ê²°ì˜ í¥ë¯¸ë¡œìš´ ì´ì•¼ê¸°ë¡œ ì „í™˜í•˜ë©°, ì‚¬ìš©ìê°€ í•œ ë²ˆì— í•˜ë‚˜ì˜ ë¬¸ì œ(ì¦ìƒ, ê°€ì„¤, í•´ê²°)ì— ì§‘ì¤‘í•  ìˆ˜ ìˆê²Œ í•˜ì—¬ ê¸´ ë¬¸ì„œë³´ë‹¤ ì´í•´í•˜ê¸° ì‰½ìŠµë‹ˆë‹¤. 'íƒì • ì‚¬ê±´ íŒŒì¼'ì´ë¼ëŠ” ë©”íƒ€í¬ëŠ” ì‚¬ìš©ì ì°¸ì—¬ë¥¼ ë†’ì´ê³  ë¶„ì„ ê³¼ì •ì„ ê°•ì¡°í•©ë‹ˆë‹¤. -->
    <!-- Visualization & Content Choices: ì´ ë¦¬í¬íŠ¸ëŠ” ì •ëŸ‰ì  ë°ì´í„°ê°€ ì—†ëŠ” í…ìŠ¤íŠ¸ ê¸°ë°˜ì´ë¯€ë¡œ, ì „í†µì ì¸ ì°¨íŠ¸ëŠ” ì‚¬ìš©í•˜ì§€ ì•Šì•˜ìŠµë‹ˆë‹¤. ëŒ€ì‹ , ì¸í„°ë™í‹°ë¸Œí•œ ì½˜í…ì¸  í‘œì‹œì— ì§‘ì¤‘í–ˆìŠµë‹ˆë‹¤. í•µì‹¬ ê°œë…ë“¤ì€ 'ë‹¨ì„œ'ë¡œ ê°•ì¡°ë©ë‹ˆë‹¤. ë³µì¡í•œ ì•„í‚¤í…ì²˜ ì¶©ëŒ ë° í•´ê²°ì±…ì€ ìŠ¤íƒ€ì¼ë§ëœ ë¸”ë¡ ë‚´ì—ì„œ 'Before/After' ìŠ¤íƒ€ì¼ì˜ ì½”ë“œ ìŠ¤ë‹ˆí«ì„ ì‚¬ìš©í•˜ì—¬ ì œì‹œë©ë‹ˆë‹¤. ì´ ì ‘ê·¼ ë°©ì‹ì€ ë°ì´í„° ì‹œê°í™”ë³´ë‹¤ëŠ” ë””ë²„ê¹…ì˜ ë…¼ë¦¬ì  íë¦„ì„ ì„¤ëª…í•˜ëŠ” ë° ìš°ì„ ìˆœìœ„ë¥¼ ë‘ì–´ ê¸°ìˆ ì  ì„¸ë¶€ ì‚¬í•­ì„ ëª…í™•í•˜ê³  ì˜í–¥ë ¥ ìˆê²Œ ë§Œë“­ë‹ˆë‹¤. -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->
    <style>
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #f1f5f9;
        }
        .timeline-item {
            transition: all 0.3s ease;
            cursor: pointer;
        }
        .timeline-item.active {
            background-color: #3b82f6;
            color: white;
            transform: translateY(-4px);
            box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
        }
        .timeline-item.active .timeline-phase {
            color: white;
        }
        .timeline-item:not(.active):hover {
            background-color: #dbeafe;
            transform: translateY(-2px);
        }
        .content-fade-in {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        .code-block {
            background-color: #1e293b;
            color: #e2e8f0;
            font-family: 'Courier New', Courier, monospace;
            padding: 1rem;
            border-radius: 0.5rem;
            overflow-x: auto;
            font-size: 0.875rem;
        }
    </style>
</head>
<body class="text-slate-800">

    <main class="container mx-auto p-4 md:p-8 max-w-5xl">
        <header class="text-center mb-10">
            <h1 class="text-3xl md:text-4xl font-bold text-slate-900">ì‚¬ê±´ íŒŒì¼: Google ê³„ì • ì—°ë™ ë¯¸ìŠ¤í„°ë¦¬</h1>
            <p class="mt-2 text-lg text-slate-600">ì‹¤íŒ¨ì—ì„œ ì„±ê³µê¹Œì§€, ë©°ì¹ ì— ê±¸ì¹œ íŠ¸ëŸ¬ë¸”ìŠˆíŒ… ì—¬ì •.</p>
        </header>

        <!-- ì¸í„°ë™í‹°ë¸Œ íƒ€ì„ë¼ì¸ ë‚´ë¹„ê²Œì´ì…˜ -->
        <nav id="timeline-nav" class="flex flex-col md:flex-row justify-center items-center gap-2 md:gap-4 mb-12">
            <!-- íƒ€ì„ë¼ì¸ ì•„ì´í…œì´ JSì— ì˜í•´ ì—¬ê¸°ì— ì£¼ì…ë©ë‹ˆë‹¤ -->
        </nav>

        <!-- ë™ì  ì½˜í…ì¸  í‘œì‹œ ì˜ì—­ -->
        <div id="content-area">
            <!-- ì„ íƒëœ ë‹¨ê³„ì˜ ì½˜í…ì¸ ê°€ JSì— ì˜í•´ ì—¬ê¸°ì— ì£¼ì…ë©ë‹ˆë‹¤ -->
        </div>
    </main>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            const timelineNav = document.getElementById('timeline-nav');
            const contentArea = document.getElementById('content-area');
            let currentPhaseIndex = 0;

            const caseFiles = [
                {
                    phase: "1ë‹¨ê³„",
                    title: "ë³´ì´ì§€ ì•ŠëŠ” ë¦¬ë‹¤ì´ë ‰ì…˜",
                    icon: "ğŸ‘»",
                    content: {
                        symptom: "í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ë°±ì—”ë“œ API í˜¸ì¶œ ì‹œ, ë¸Œë¼ìš°ì € ë„¤íŠ¸ì›Œí¬ íƒ­ì—ëŠ” ìµœì¢…ì ìœ¼ë¡œ `404 Not Found`ê°€ ê¸°ë¡ë˜ì—ˆìœ¼ë‚˜, ì‹¤ì œë¡œëŠ” ë°±ì—”ë“œê°€ `302 Found` ì‘ë‹µìœ¼ë¡œ `/login?error` ê²½ë¡œë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ì‹œí‚¤ëŠ” í˜„ìƒì´ ë¨¼ì € ë°œìƒ.",
                        hypothesis: "ë‹¨ìˆœí•œ URL ê²½ë¡œ ì˜¤íƒ€ ë˜ëŠ” `permitAll()` ì„¤ì • ëˆ„ë½.",
                        investigation: [
                            "`curl`ì„ ì´ìš©í•œ ë°±ì—”ë“œ API ì§ì ‘ í˜¸ì¶œ í…ŒìŠ¤íŠ¸ë¥¼ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œ í™˜ê²½ ë³€ìˆ˜ë¥¼ ë°°ì œ.",
                            "`curl` í…ŒìŠ¤íŠ¸ ê²°ê³¼, `STATELESS` ì„¤ì •ì—ë„ ë¶ˆêµ¬í•˜ê³  `JSESSIONID` ì¿ í‚¤ê°€ ìƒì„±ë˜ê³  `/login?error`ë¡œ ë¦¬ë‹¤ì´ë ‰ì…˜ë˜ëŠ” ê²ƒì„ í™•ì¸. ì´ëŠ” JWT ì¸ì¦ì´ ì‹¤íŒ¨í•˜ê³  Spring Securityì˜ ê¸°ë³¸ ì„¸ì…˜ ê¸°ë°˜ ì¸ì¦ ë¡œì§ì´ ë™ì‘í•˜ê³  ìˆìŒì„ ì˜ë¯¸.",
                            "`JwtAuthenticationFilter`ì˜ ë¡œê·¸ë¥¼ ì‹¬ì¸µ ë¶„ì„í•œ ê²°ê³¼, í•„í„° ìì²´ëŠ” 'Authentication successful' ë¡œê·¸ë¥¼ ë‚¨ê²¼ìŒ.",
                        ],
                        breakthrough: "ì¸ì¦ í•„í„°ëŠ” ì„±ê³µí–ˆìœ¼ë‚˜, ê·¸ *ì§í›„*ì— ì•Œ ìˆ˜ ì—†ëŠ” ì´ìœ ë¡œ ì¸ì¦ ì •ë³´ê°€ ìœ ì‹¤ë˜ì–´ ìµœì¢…ì ìœ¼ë¡œ ì¸ì¦ ì‹¤íŒ¨ë¡œ ì²˜ë¦¬ë˜ê³  ìˆìŒì„ íŒŒì•…. ë¬¸ì œì˜ ì›ì¸ì€ ë‹¨ìˆœ ê²½ë¡œ ë¬¸ì œê°€ ì•„ë‹Œ, **Spring Securityì˜ ë³µì¡í•œ ë‚´ë¶€ ë™ì‘**ì— ìˆìŒì„ í™•ì‹ í•˜ê³  ì‹¬ì¸µ ë””ë²„ê¹…ìœ¼ë¡œ ì „í™˜."
                    }
                },
                {
                    phase: "2ë‹¨ê³„",
                    title: "ì•„í‚¤í…ì²˜ ì¶©ëŒ",
                    icon: "âš”ï¸",
                    content: {
                        symptom: "Spring Security í•„í„° ì²´ì¸ì—ì„œ ìš”ì²­ì´ ì°¨ë‹¨ë˜ì–´, í”„ë¡ íŠ¸ì—”ë“œì—ì„œ CORS, URL íŒŒì‹± ì˜¤ë¥˜ ë“± 2ì°¨ì ì¸ ë¬¸ì œê°€ ë°œìƒ.",
                        hypothesis: "JWT ê¸°ë°˜ì˜ `STATELESS` ì•„í‚¤í…ì²˜ì™€, Spring Securityì˜ ê¸°ë³¸ `oauth2Login()` ì„¤ì •ì´ ì¶©ëŒí•˜ê³  ìˆì„ ê°€ëŠ¥ì„±.",
                        investigation: [
                            "'ì†Œì…œ ë¡œê·¸ì¸'ê³¼ 'ê³„ì • ì—°ë™'ì€ ëª©ì ì´ ë‹¤ë¥¸ ë³„ê°œì˜ íë¦„ì„ì„ ëª…í™•íˆ ì •ì˜.",
                            "'ê³„ì • ì—°ë™'ì€ JWT í† í°ì„ ê°€ì§„ ì‚¬ìš©ìê°€ ì§ì ‘ ë§Œë“  APIë¥¼ í˜¸ì¶œí•˜ëŠ” íë¦„ì´ë¯€ë¡œ, Springì˜ ìë™ `.oauth2Login()`ê³¼ ê²½ë¡œê°€ ê²¹ì¹˜ì§€ ì•Šë„ë¡ ë¶„ë¦¬í•´ì•¼ í•¨ì„ íŒŒì•….",
                            "`SecurityConfig`ë¥¼ ìˆ˜ì •í•˜ì—¬ `.oauth2Login()`ì˜ ì½œë°± URIë¥¼ `/oauth2/callback/*`ìœ¼ë¡œ ë³€ê²½í•˜ê³ , ì»¤ìŠ¤í…€ 'ê³„ì • ì—°ë™' ì»¨íŠ¸ë¡¤ëŸ¬ì˜ ê²½ë¡œëŠ” `permitAll()`ë¡œ ì—´ì–´ë‘ì–´ ê²½ë¡œ ì¶©ëŒì„ í•´ê²°.",
                        ],
                        breakthrough: "**ë‘ ê¸°ëŠ¥ì˜ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ëª…í™•íˆ ë¶„ë¦¬**í•˜ì—¬ ì•„í‚¤í…ì²˜ ì¶©ëŒì„ í•´ê²°. ì´ë¡œì¨ ìš”ì²­ì€ ë“œë””ì–´ ë°±ì—”ë“œ ì»¨íŠ¸ë¡¤ëŸ¬ë¥¼ í–¥í•´ ì¶œë°œí•  ìˆ˜ ìˆê²Œ ë¨."
                    }
                },
                {
                    phase: "3ë‹¨ê³„",
                    title: "Googleê³¼ì˜ ì†Œí†µ ì‹¤íŒ¨",
                    icon: "ğŸ”‘",
                    content: {
                        symptom: "ê²½ë¡œ ì¶©ëŒ í•´ê²° í›„, Googleë¡œë¶€í„° `400 redirect_uri_mismatch` ë˜ëŠ” `401 Unauthorized` ì˜¤ë¥˜ë¥¼ ë°›ìŒ.",
                        hypothesis: "ìš°ë¦¬ ì•±ì´ Googleì— ì „ë‹¬í•˜ëŠ” ì •ë³´(Scope, Redirect URI)ì™€, Google Cloud Consoleì— ë“±ë¡ëœ ì •ë³´ê°€ ì¼ì¹˜í•˜ì§€ ì•ŠìŒ.",
                        investigation: [
                            "**ë‹¨ì„œ #1 (`redirect_uri_mismatch`):** Reactì˜ ì¤‘ì²© ë¼ìš°í„° êµ¬ì¡°ë¡œ ì¸í•´ ì‹¤ì œ ì½œë°± URIê°€ ì˜ˆìƒê³¼ ë‹¬ëìŒì„ ë°œê²¬. **Google Cloud Console**, **ë°±ì—”ë“œì˜ URL ìƒì„± ë¡œì§**, **ë°±ì—”ë“œì˜ í† í° êµí™˜ ë¡œì§** ì„¸ ê³³ì˜ URIë¥¼ ëª¨ë‘ í†µì¼í•˜ì—¬ í•´ê²°.",
                            "**ë‹¨ì„œ #2 (`401 Unauthorized`):** ê°€ì¥ êµë¬˜í•œ ì›ì¸. í† í° ìì²´ëŠ” ìœ íš¨í–ˆì§€ë§Œ, **ìš”ì²­í•œ ê¶Œí•œ(Scope)ê³¼ ë‹¤ë¥¸ APIë¥¼ í˜¸ì¶œ**í•˜ê³  ìˆì—ˆìŒ. 'Gmail ì½ê¸°' ê¶Œí•œ í† í°ìœ¼ë¡œ 'ì‚¬ìš©ì ì •ë³´' APIë¥¼ í˜¸ì¶œí•˜ë ¤ê³  ì‹œë„í•˜ì—¬ ë°œìƒ.",
                        ],
                        breakthrough: "`GoogleAuthorizationCodeFlow` Bean ìƒì„± ì‹œ, í•„ìš”í•œ ëª¨ë“  Scope(`GMAIL_READONLY`, `USERINFO_PROFILE` ë“±)ë¥¼ ëª…ì‹œì ìœ¼ë¡œ í¬í•¨í•˜ì—¬, ì˜¬ë°”ë¥¸ 'ì—´ì‡  ê¾¸ëŸ¬ë¯¸'ë¥¼ ìš”ì²­í•˜ë„ë¡ ìˆ˜ì •."
                    }
                },
                {
                    phase: "4ë‹¨ê³„",
                    title: "ìŠ¤ìŠ¤ë¡œ íŒŒê´´ë˜ëŠ” í† í°",
                    icon: "â³",
                    content: {
                        symptom: "ëª¨ë“  ì„¤ì •ì„ ì™„ë£Œí–ˆìŒì—ë„, ë°±ì—”ë“œì—ì„œ `IllegalStateException: ... does not support refreshing the access token.` ë¼ëŠ” ìµœì¢… ì—ëŸ¬ ë°œìƒ.",
                        hypothesis: "Googleë¡œë¶€í„° ë°›ì€ Access Tokenê³¼ Refresh Tokenì„ ì˜¬ë°”ë¥´ê²Œ ê´€ë¦¬í•˜ì§€ ëª»í•˜ê³  ìˆìŒ.",
                        investigation: [
                            "ê¸°ì¡´ ì½”ë“œëŠ” `code`ë¥¼ `tokenResponse`ë¡œ êµí™˜í•œ ë’¤, `accessToken`ë§Œ ì‚¬ìš©í•˜ì—¬ ë¶ˆì™„ì „í•œ `Credential` ê°ì²´ë¥¼ ìˆ˜ë™ìœ¼ë¡œ ìƒì„±í•˜ê³  ìˆì—ˆìŒ. ì´ ê³¼ì •ì—ì„œ ê°€ì¥ ì¤‘ìš”í•œ `refreshToken`ì´ ìœ ì‹¤ë¨.",
                            "Google API ë¼ì´ë¸ŒëŸ¬ë¦¬ê°€ ë§Œë£Œëœ `accessToken`ì„ ê°±ì‹ í•˜ë ¤ê³  í•  ë•Œ, `refreshToken`ì´ ì—†ì–´ì„œ ì˜ˆì™¸ë¥¼ ë°œìƒì‹œí‚¨ ê²ƒì„.",
                        ],
                        breakthrough: "**`GoogleAuthorizationCodeFlow`ì˜ ë‚´ì¥ ê¸°ëŠ¥ì„ ì ê·¹ì ìœ¼ë¡œ í™œìš©**í•˜ì—¬ ë¬¸ì œë¥¼ í•´ê²°. `createAndStoreCredential()`ê³¼ `setDataStoreFactory()`ë¥¼ í†µí•´ `Credential`ì˜ ì˜ì†ì„±ê³¼ ìë™ ê°±ì‹  ë¬¸ì œë¥¼ í•´ê²°."
                    }
                },
                {
                    phase: "í•´ê²°",
                    title: "ì‚¬ê±´ ì¢…ê²°",
                    icon: "âœ…",
                    content: {
                        symptom: "ì™„ë²½í•˜ê²Œ ë™ì‘í•˜ëŠ” Google ê³„ì • ì—°ë™ ê¸°ëŠ¥.",
                        hypothesis: "ì²´ê³„ì ì¸ ì§„ë‹¨ì„ í†µí•´ í”„ë¡ íŠ¸ì—”ë“œ ë¼ìš°íŒ…ë¶€í„° ë°±ì—”ë“œ ë³´ì•ˆ, ì™¸ë¶€ APIì˜ í† í° ê´€ë¦¬ê¹Œì§€ ì´ì–´ì§€ëŠ” ë³µí•©ì ì¸ ë¬¸ì œë¥¼ í•´ê²°í•¨.",
                        investigation: [
                            "**ìµœì¢… ì†”ë£¨ì…˜:** `GoogleAuthorizationCodeFlow`ë¥¼ ì¤‘ì‹¬ìœ¼ë¡œ, ê¶Œí•œ(Scope) ì„¤ì •, `redirect_uri` ì¤‘ì•™ ê´€ë¦¬, `Credential`ì˜ ì˜ì†ì„± ê´€ë¦¬ê¹Œì§€ ì´ì–´ì§€ëŠ” ì „ì²´ OAuth 2.0 íë¦„ì„ Googleì˜ ê¶Œì¥ ë°©ì‹ì— ë§ê²Œ ì¬êµ¬ì„±í•˜ì—¬ ëª¨ë“  ë¬¸ì œë¥¼ í•´ê²°.",
                        ],
                        breakthrough: "ì´ ê²½í—˜ì€ **ì²´ê³„ì ì¸ ë””ë²„ê¹… ëŠ¥ë ¥**, **Spring Securityì— ëŒ€í•œ ê¹Šì€ ì´í•´**, **ì™¸ë¶€ API ì—°ë™ ëŠ¥ë ¥**, ê·¸ë¦¬ê³  ë³µì¡í•œ ë¬¸ì œë¥¼ í•´ê²°í•´ë‚´ëŠ” ê°œë°œìë¡œì„œì˜ **ëˆê¸°ì™€ ì§‘ìš”í•¨**ì„ ì¦ëª…í•˜ëŠ” ì¤‘ìš”í•œ ìì‚°ì´ ë¨."
                    }
                }
            ];

            function render() {
                // íƒ€ì„ë¼ì¸ ë Œë”ë§
                timelineNav.innerHTML = '';
                caseFiles.forEach((file, index) => {
                    const item = document.createElement('div');
                    item.className = `timeline-item flex-1 p-3 md:p-4 rounded-lg shadow-md bg-white border border-slate-200 text-center ${index === currentPhaseIndex ? 'active' : ''}`;
                    item.dataset.index = index;
                    item.innerHTML = `
                        <div class="text-3xl mb-1">${file.icon}</div>
                        <div class="font-bold text-sm md:text-base">${file.title}</div>
                        <div class="timeline-phase text-xs text-slate-500">${file.phase}</div>
                    `;
                    timelineNav.appendChild(item);
                });

                // ì½˜í…ì¸  ë Œë”ë§
                const file = caseFiles[currentPhaseIndex];
                contentArea.innerHTML = '';
                const contentDiv = document.createElement('div');
                contentDiv.className = 'content-fade-in bg-white p-6 md:p-8 rounded-lg shadow-lg border border-slate-200';
                
                let investigationItems = file.content.investigation
                    .map(item => `<li class="flex items-start"><span class="mr-2 text-blue-500">-</span><span>${item}</span></li>`)
                    .join('');

                contentDiv.innerHTML = `
                    <h2 class="text-2xl font-bold mb-4 text-slate-900">${file.icon} ${file.title}</h2>
                    <div class="space-y-6">
                        <div>
                            <h3 class="font-semibold text-lg text-red-600 mb-2">ì¦ìƒ</h3>
                            <p class="text-slate-700">${file.content.symptom}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-yellow-600 mb-2">ì´ˆê¸° ê°€ì„¤</h3>
                            <p class="text-slate-700">${file.content.hypothesis}</p>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-blue-600 mb-2">ìˆ˜ì‚¬ ë° ë‹¨ì„œ</h3>
                            <ul class="space-y-2 text-slate-700">${investigationItems}</ul>
                        </div>
                        <div>
                            <h3 class="font-semibold text-lg text-green-600 mb-2">ê²°ì •ì  ëŒíŒŒêµ¬ / ê²°ë¡ </h3>
                            <p class="text-slate-700 font-medium">${file.content.breakthrough}</p>
                        </div>
                    </div>
                `;
                contentArea.appendChild(contentDiv);
            }
            
            timelineNav.addEventListener('click', (e) => {
                const target = e.target.closest('.timeline-item');
                if (target && target.dataset.index) {
                    currentPhaseIndex = parseInt(target.dataset.index, 10);
                    render();
                }
            });

            // ì´ˆê¸° ë Œë”ë§
            render();
        });
    </script>

</body>
</html>
